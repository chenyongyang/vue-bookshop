webpackJsonp([3],{"+1Rd":function(t,e){},WMsX:function(t,e){},tcnj:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("Xxa5"),n=o.n(r),s=o("Gu7T"),a=o.n(s),i=o("exGp"),c=o.n(i),l=o("L8WO"),u=o("gyMJ"),v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"}],staticClass:"dialog"},[this._t("default")],2)},staticRenderFns:[]};var f=o("VU/8")({props:["isShow"]},v,!1,function(t){o("WMsX")},"data-v-c8bb651c",null).exports,d={created:function(){this.getData()},mounted:function(){var t=this,e=this.$refs.scroll,o=e.offsetTop,r=0,n=!1;e.addEventListener("touchstart",function(s){if(0==e.scrollTop&&e.offsetTop==o){var a=s.touches[0].pageY,i=function t(s){n=!0;var i=s.touches[0].pageY;(r=i-a)>0?r<=50?e.style.top=r+o+"px":(r=50,e.style.top=o+50+"px"):(e.removeEventListener("touchmove",t),e.removeEventListener("touchend",c))},c=function s(a){n&&(n=!1,clearInterval(t.timer1),t.timer1=setInterval(function(){if(r<=0)return clearInterval(t.timer1),r=0,e.style.top=o+"px",e.removeEventListener("touchmove",i),e.removeEventListener("touchend",s),t.hasMore=!0,t.books=[],t.hasMore=!0,void t.getData();r-=1,e.style.top=o+r+"px"},1))};e.addEventListener("touchmove",i),e.addEventListener("touchend",c)}},!1)},data:function(){return{books:[],flag:!1,offset:0,hasMore:!0,isLoading:!1}},components:{Head:l.a,Dialog:f},methods:{addCart:function(t){this.$store.commit("addCart",t)},getData:function(){var t=this;return c()(n.a.mark(function e(){var o,r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasMore||t.isLoading){e.next=11;break}return t.isLoading=!0,e.next=4,Object(u.e)(t.offset);case 4:o=e.sent,r=o.hasMore,s=o.result,t.hasMore=r,t.books=[].concat(a()(t.books),a()(s)),t.offset=t.books.length,t.isLoading=!1;case 11:case"end":return e.stop()}},e,t)}))()},remove:function(t){var e=this;return c()(n.a.mark(function o(){var r;return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(u.f)(t);case 2:r=o.sent,e.books=e.books.filter(function(e){return e.bookId!==t}),200===r.data.state&&(e.flag=!0,setTimeout(function(){e.flag=!1},500));case 5:case"end":return o.stop()}},o,e)}))()},more:function(){this.getData()},showMore:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.$refs.scroll;e.scrollTop+e.clientHeight+20>=e.scrollHeight&&t.getData()},20)},toTop:function(){var t=this;clearInterval(this.timer2);var e=this.$refs.scroll.scrollTop;this.timer2=setInterval(function(){if(e<=0)return clearInterval(t.timer2),e=0,void(t.$refs.scroll.scrollTop=0);e-=50,t.$refs.scroll.scrollTop=e},1)}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Head",{attrs:{back:!0},on:{"to-top":t.toTop}},[t._v("列表页")]),t._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:t.showMore}},[o("Dialog",{attrs:{isShow:t.flag}},[t._v("已删除！")]),t._v(" "),o("ul",t._l(t.books,function(e,r){return o("router-link",{key:r,attrs:{to:{name:"Detail",params:{id:e.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bookCover,expression:"book.bookCover"}]}),t._v(" "),o("div",[o("h4",[t._v(t._s(e.bookName))]),t._v(" "),o("p",[t._v(t._s(e.bookInfo))]),t._v(" "),o("b",[t._v(t._s(e.bookPrice))]),t._v(" "),o("div",{staticClass:"btn-list"},[o("button",{on:{click:function(o){o.stopPropagation(),t.remove(e.bookId)}}},[t._v("删除")]),t._v(" "),o("button",{on:{click:function(o){o.stopPropagation(),t.addCart(e)}}},[t._v("添加")])])])])})),t._v(" "),t.hasMore?t._e():o("p",{staticClass:"nomore"},[t._v("已经没有数据啦！")])],1)],1)},staticRenderFns:[]};var p=o("VU/8")(d,h,!1,function(t){o("+1Rd")},"data-v-0e543fa4",null);e.default=p.exports}});
//# sourceMappingURL=3.a5d94caf69694a190335.js.map